# 计算机网络

## OSI 七层模型

### 物理层

- 以二进制数据形式在物理媒体上传输数据

### 数据链路层

- 传输有地址的帧以及错误检测功能

### 网络层 

- 为数据包选择路由

### 传输层

- 提供端对端的接口

	- TCP

		- 三次握手

			- 目的是「了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误」；解决网络中存在延迟的重复分组
			- 问题的本质是，信道是不可靠的，但是我们要建立可靠的连接发送可靠的数据，也就是数据传输是需要可靠的。
			- 三次握手是一个理论上的最小值，并不是说是 tcp 协议要求的，而是为了满足在不可靠的信道上传输可靠的数据所要求的。
			- 过程

				- A SYN 请求建立连接
				- B ACK 针对 SYN 的确认应答
SYN 请求建立连接
				- A ACK 针对 B SYN 的确认应答

		- 四次挥手

			- 因为 TCP 是全双工模式，接收到 FIN 时意味着没有数据再发送过来，但是还是可以继续发送数据
			- 过程

				- A FIN 请求切断连接
				- B ACK 针对 A FIN 的应答
				- B FIN 请求切断连接
				- A ACK 针对 B FIN 的确认应答

	- UDP

### 会话层

- 解除或建立与别的接点的联系

### 表示层

- 数据格式化

	- 代码转换，数据加密 

### 应用层

- 文件传输

	- HTTP
	- FTP
	- SMTP

## TCP/IP 五层模型的协议

### 应用层

### 传输层

### 网络层

### 数据链路层

### 物理层

## TCP

### 拥塞控制和流量控制

- 拥塞控制

	- 作用于网络的，它是防止过多的数据注入到网络中，避免出现网络负载过大的情况
	- 慢开始、拥塞避免

		- 发送方维持一个叫做拥塞窗口cwnd（congestion window）的状态变量。拥塞窗口的大小取决于网络的拥塞程度，并且动态地在变化。
		- 慢开始算法的思路就是，不要一开始就发送大量的数据，先探测一下网络的拥塞程度，也就是说由小到大逐渐增加拥塞窗口的大小。

	- 快重传、快恢复

		- 快重传要求接收方在收到一个失序的报文段后就立即发出重复确认而不要等到自己发送数据时捎带确认。
		- 发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段，而不必继续等待设置的重传计时器时间到期。

- 流量控制

	- 作用于接收者的，它是控制发送者的发送速度从而使接收者来得及接收，防止分组丢失的。

## HTTP 状态码

### 301

- 永久重定向
-  对于 GET 请求, 301 跳转会默认被浏览器 cache。

### 302

- 临时重定向
- 对于 GET 请求, 302 跳转默认不会被浏览器缓存，除非在 HTTP 响应中通过 Cache-Control 或 Expires 暗示浏览器缓存。

## 域名系统（Domain Name System，缩写 DNS）& HTTP 杂汇

### 因特网的一项核心服务，它作为可以将域名和 IP 地址相互映射的一个分布式数据库，这个过程就是域名解析

### 一个域名往往对应多个 DNS 地址

### 浏览器中输入一个 URL 到页面返回的全过程

- 根据域名，进行 DNS 域名解析

	- 域名解析用 UDP 协议，因为快

- 拿到解析的 IP 地址，建立 TCP 连接
- 向 IP 地址，发送 HTTP 请求
- 服务器处理请求并返回响应结果
- 关闭 TCP 连接
- 浏览器解析 HTML 并渲染布局

### 一个 TCP 连接后是否会在一个 HTTP 请求完成后断开

- HTTP/1.0 中 Connection 默认是 close 的，即每次请求都会重新建立和断开 TCP 连接
- HTTP/1.1 中 Connection 默认是 keep-alive 的，即 tcp 连接可以复用，不用每次都要重新建立和断开 TCP 连接
- 所以，在 HTTP/1.1 情况下，一个 TCP 连接是可以发送多个 HTTP 请求
- 在 HTTP/1.1 存在  Pipelining 技术可以完成这个多个请求同时发送，但是由于浏览器默认关闭。
- 在 HTTP2 中由于 Multiplexing 特点的存在，多个 HTTP 请求可以在同一个 TCP 连接中并行进行

