# Spring 响应式微服务

本思维导图原文来自于《Spring 响应式微服务：Spring Boot 2 + Spring 5 + Spring  Cloud 实战》

## 一、直面响应式微服务架构

## 二、响应式编程模型与 Reactor 框架

### 响应式编程模型

- 流

	- 概念

		- 由生产者生产并由一个或多个消费者消费的元素的序列（发布/订阅模型）

			- 推模型

				- 生产者将元素推送给消费者

			- 拉模型

				- 消费者从生产者中拉取元素

			- 生产者与消费者之间的同步异步区别

	- 流量控制

		- 节流

			- 消费者直接丢弃无法处理的元素

		- 使用缓冲区

			- 当生产者比消费者快的时候，消费者可以采用无边界缓冲区来保存生产者产生的元素
			- Java 中的无边界缓冲队列

				- LinkedBlockingQueue（几乎无边界，Integer 最大值）
				- PriorityBlockingQueue（受系统资源的影响）
				- DelayQueue、LinkedTransferQueue
				- ConcurrentLinkedQueue（非阻塞队列）

		- 调用栈阻塞

			- 同步线程

		- 使用背压

			- 消费者需要多少，生产者就生产多少

- 背压

	- 背压机制

		- 消费者在消费由生产者生产的数据的同时，也需要有一种能够向上游反馈流量需求的机制，这种机制就是背压机制

	- 背压的实现方式

		- 阻塞式背压

			- 生产者和消费者处于同一线程，当消费者消费的时候阻塞生产者的生产

		- 非阻塞式背压（推荐）

			- 采用拉模型，即消费者会要求生产者生成多少消息量，最多只能生产多少，然后等待消费者的命令。

- 响应式流（预先定义好的接口）

	- 响应式流规范

		- 目标是定义将数据流从生产者传递到消费者而不需要生产者阻塞
		- 消费者向生产者发送多个元素的异步请求，生产者向消费者发送合适数量的元素

	- 响应式流接口

		- Publisher<T>

			- 潜在的包含无限数量的有序元素的生产者，他根据收到的请求向当前订阅者发送元素

		- Subscriber<T>

			- 订阅者从发布者哪里订阅并接收元素。

		- Subscription

			- 表示订阅者订阅的一个发布者的令牌

		- Processor<T,R>

			- 处理器充当订阅者和发布者之间的处理媒介，类似于将发布者提供的 T 类型数据转换为 R 类型数据发给订阅者

### Reactor 框架

- 响应式编程实现技术概述
- 子主题 2
- 子主题 1
- 子主题 1
- 子主题 1
- 子主题 1

### 创建 Flux 和 Mono

### Flux 和 Mono 操作符

### Reactor 框架中的背压机制

## 分支主题 3

*高老四博客 - glorze.com*